<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dynamic Prescription Maker</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background: #f2f2f2;
}
.container {
    display: flex;
    flex-wrap: wrap;
    padding: 10px;
    gap: 10px;
}
.form-container, .preview-container {
    background: #fff;
    padding: 15px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    border-radius: 8px;
    flex: 1 1 300px;
}
.form-container { min-width: 280px; }
.preview-container { min-width: 280px; overflow-x: auto; }

h2 { margin-top: 0; color: #004080; }
label { display: block; margin-top: 10px; font-weight: bold; }
input, textarea, select {
    width: 100%;
    padding: 8px;
    margin-top: 3px;
    border-radius: 5px;
    border: 1px solid #ccc;
    box-sizing: border-box;
}
textarea { resize: vertical; }
button {
    margin-top: 10px;
    padding: 8px 12px;
    border: none;
    background-color: #004080;
    color: white;
    border-radius: 5px;
    cursor: pointer;
}
button:hover { background-color: #003366; }

.prescription {
    width: 100%;
    max-width: 600px;
    margin: 0 auto;
    background: #fff;
    padding: 20px;
    border: 2px solid #004080;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    color: #000;
}
.prescription h3, .prescription h4 { margin: 5px 0; text-align: center; }
.block { margin: 10px 0; }
.signature { text-align: right; margin-top: 40px; }

.drug-row { display: flex; gap: 5px; margin-top: 5px; }
.drug-row input { flex: 1; }
.remove-drug { background-color: #cc0000; }

@media (max-width: 768px) { .container { flex-direction: column; } }

@media print {
    body * { visibility: hidden; }
    .prescription, .prescription * { visibility: visible; }
    .prescription { margin: 0; width: 100%; max-width: 100%; box-shadow: none; border: 1px solid #000; padding: 20px; }
}
</style>
</head>
<body>

<div class="container">
    <!-- Form -->
    <div class="form-container">
        <h2>Prescription Maker</h2>
        <label>Doctor Name & Credentials</label>
        <input type="text" id="doctorName" placeholder="Dr. A B C, MBBS, FCPS">
        
        <label>Clinic / Hospital</label>
        <input type="text" id="clinicName" placeholder="City Clinic">

        <label>Patient Name</label>
        <input type="text" id="patientName" placeholder="Patient Name">

        <label>Age</label>
        <input type="text" id="patientAge" placeholder="25">

        <label>Gender</label>
        <select id="patientGender">
            <option value="">Select Gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
        </select>

        <label>Diagnosis</label>
        <textarea id="diagnosis" rows="2" placeholder="Diagnosis details..."></textarea>

        <label>Drugs</label>
        <div id="drugContainer"></div>
        <button type="button" onclick="addDrug()">+ Add Drug</button>

        <button type="button" onclick="clearForm()">Clear Form</button>
        <button type="button" onclick="printPrescription()">Print Prescription</button>
    </div>

    <!-- Preview -->
    <div class="preview-container">
        <div class="prescription" id="prescriptionPreview">
            <h3 id="docNamePreview">Dr. Name, Credentials</h3>
            <h4 id="clinicPreview">Clinic / Hospital</h4>
            <hr>
            <div class="block"><strong>Patient:</strong> <span id="patientPreview">Name</span></div>
            <div class="block"><strong>Age / Gender:</strong> <span id="ageGenderPreview">--</span></div>
            <div class="block"><strong>Diagnosis:</strong> <span id="diagnosisPreview">--</span></div>
            <div class="block"><strong>Prescription / Medicines:</strong>
                <ul id="drugsPreview"></ul>
            </div>
            <div class="signature">Doctor Signature</div>
        </div>
    </div>
</div>

<script>
// Functions
function updatePreview() {
    document.getElementById('docNamePreview').innerText = document.getElementById('doctorName').value || 'Dr. Name, Credentials';
    document.getElementById('clinicPreview').innerText = document.getElementById('clinicName').value || 'Clinic / Hospital';
    document.getElementById('patientPreview').innerText = document.getElementById('patientName').value || '--';
    const age = document.getElementById('patientAge').value || '--';
    const gender = document.getElementById('patientGender').value || '--';
    document.getElementById('ageGenderPreview').innerText = age + ' / ' + gender;
    document.getElementById('diagnosisPreview').innerText = document.getElementById('diagnosis').value || '--';

    const drugsPreview = document.getElementById('drugsPreview');
    drugsPreview.innerHTML = '';
    document.querySelectorAll('.drug-row input').forEach(drugInput => {
        if (drugInput.value.trim() !== '') {
            const li = document.createElement('li');
            li.innerText = drugInput.value;
            drugsPreview.appendChild(li);
        }
    });
}

// Add drug row
function addDrug(value='') {
    const container = document.getElementById('drugContainer');
    const row = document.createElement('div');
    row.className = 'drug-row';
    const input = document.createElement('input');
    input.type = 'text';
    input.placeholder = 'Drug name, dose, instructions';
    input.value = value;
    input.addEventListener('input', updatePreview);
    const removeBtn = document.createElement('button');
    removeBtn.type = 'button';
    removeBtn.className = 'remove-drug';
    removeBtn.innerText = 'Remove';
    removeBtn.onclick = () => { row.remove(); updatePreview(); };
    row.appendChild(input);
    row.appendChild(removeBtn);
    container.appendChild(row);
    input.focus();
    updatePreview();
}

// Clear form
function clearForm() {
    document.querySelectorAll('input, textarea, select').forEach(el => el.value = '');
    document.getElementById('drugContainer').innerHTML = '';
    updatePreview();
}

// Print
function printPrescription() {
    window.print();
}

// Initialize
updatePreview();
</script>

</body>
</html>
